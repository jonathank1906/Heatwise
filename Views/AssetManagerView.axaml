<UserControl
    x:Class="Sem2Proj.Views.AssetManagerView"
    xmlns="https://github.com/avaloniaui"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:vm="using:Sem2Proj.ViewModels"
    d:DesignHeight="450"
    d:DesignWidth="800"
    x:DataType="vm:AssetManagerViewModel"
    mc:Ignorable="d">

    <UserControl.Styles>
        <Style Selector="Border.value-box">
            <Setter Property="Background" Value="#BFBFBF" />
            <Setter Property="Padding" Value="5,2" />
            <Setter Property="Margin" Value="0,6,0,15" />
            <Setter Property="Height" Value="24" />
            <Setter Property="Width" Value="45" />
            <Setter Property="HorizontalAlignment" Value="Center" />
            <Setter Property="CornerRadius" Value="5" />
        </Style>

        <Style Selector="Border.value-box &gt; TextBlock">
            <Setter Property="HorizontalAlignment" Value="Center" />
            <Setter Property="Width" Value="36" />
            <Setter Property="TextAlignment" Value="Center" />
            <Setter Property="Foreground" Value="Black" />
            <Setter Property="FontWeight" Value="Bold" />
        </Style>

        <Style Selector="TextBlock.unit-text">
            <Setter Property="Margin" Value="5,0" />
            <Setter Property="Foreground" Value="White" />
        </Style>

        <Style Selector="TextBlock.section-header">
            <Setter Property="Margin" Value="0,20,0,10" />
            <Setter Property="FontSize" Value="18" />
            <Setter Property="FontWeight" Value="SemiBold" />
            <Setter Property="Foreground" Value="White" />
        </Style>
    </UserControl.Styles>

    <Grid Background="#1e1e1e" RowDefinitions="Auto,Auto,*">

        <!--  Top Bar  -->
        <Border
            Grid.Row="1"
            Grid.Column="1"
            Height="50"
            Margin="20,20,20,0"
            Background="#3E3E3E"
            CornerRadius="10">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="Auto" />
                </Grid.ColumnDefinitions>

                <StackPanel
                    Grid.Column="0"
                    Margin="10,0"
                    VerticalAlignment="Center"
                    Orientation="Horizontal">
                    <Button
                        Padding="0,0"
                        HorizontalAlignment="Left"
                        Background="Transparent"
                        BorderThickness="0"
                        Command="{Binding NavigateToCommand}"
                        CommandParameter="Production Units">
                        <TextBlock
                            FontSize="18"
                            FontWeight="Bold"
                            Foreground="White"
                            Text="Production Units" />
                    </Button>

                    <TextBlock
                        Margin="5,0,0,0"
                        FontSize="18"
                        FontWeight="Bold"
                        Foreground="White"
                        Text="&gt;" />


                    <TextBlock
                        Margin="5,0,0,0"
                        FontSize="18"
                        FontWeight="Bold"
                        Foreground="White"
                        IsVisible="{Binding !ShowScenarioSelection}"
                        Text="{Binding SelectedScenario}" />

                </StackPanel>

                <!--  Button  -->
                <Button
                    Grid.Column="1"
                    Width="120"
                    Height="35"
                    Margin="5,0,8,0"
                    HorizontalAlignment="Center"
                    Background="#0078d7"
                    Content="Configure Units"
                    CornerRadius="5"
                    Foreground="White" />
            </Grid>
        </Border>

        <!--  Right Column: Scrollable Content  -->
        <ScrollViewer
            Grid.Row="2"
            Padding="20"
            IsVisible="{Binding ShowAssetDetails}">
            <ItemsControl ItemsSource="{Binding CurrentScenarioAssets}">
                <ItemsControl.ItemTemplate>
                    <DataTemplate>
                        <Border
                            Margin="0,0,0,30"
                            Padding="20"
                            Background="#252526"
                            CornerRadius="15">
                            <Grid ColumnDefinitions="Auto,20,*">
                                <!--  Machine Image - Restored original working version  -->
                                <Grid Grid.Column="0" HorizontalAlignment="Center">
                                    <!--  Shadow container  -->
                                    <Border
                                        Width="300"
                                        Height="200"
                                        Background="Transparent"
                                        CornerRadius="10">
                                        <Border.Effect>
                                            <DropShadowEffect BlurRadius="10" Color="Black" />
                                        </Border.Effect>
                                    </Border>

                                    <!--  Image with rounded corners  -->
                                    <Border
                                        Width="300"
                                        Height="200"
                                        ClipToBounds="True"
                                        CornerRadius="10">
                                        <Border.Clip>
                                            <RectangleGeometry
                                                RadiusX="10"
                                                RadiusY="10"
                                                Rect="0,0,300,200" />
                                        </Border.Clip>
                                        <Image Source="{Binding ImageFromBinding}" Stretch="UniformToFill" />
                                    </Border>
                                </Grid>

                                <!--  Machine Details  -->
                                <StackPanel Grid.Column="2">
                                    <TextBlock Classes="machine-name" Text="{Binding Name}" />

                                    <Grid ColumnDefinitions="Auto,*" RowDefinitions="Auto,Auto,Auto,Auto,Auto,Auto">
                                        <!--  Max Heat  -->
                                        <TextBlock
                                            Grid.Row="0"
                                            Grid.Column="0"
                                            Classes="parameter-label"
                                            Text="Max Heat:" />
                                        <TextBlock
                                            Grid.Row="0"
                                            Grid.Column="1"
                                            Classes="parameter-value"
                                            Text="{Binding MaxHeat, StringFormat={}{0:F1} MW}" />

                                        <!--  Production Costs  -->
                                        <TextBlock
                                            Grid.Row="1"
                                            Grid.Column="0"
                                            Classes="parameter-label"
                                            Text="Production Costs:" />
                                        <TextBlock
                                            Grid.Row="1"
                                            Grid.Column="1"
                                            Classes="parameter-value"
                                            Text="{Binding ProductionCosts, StringFormat={}{0:F1} DKK/MWh(th)}" />

                                        <!--  CO₂ Emissions  -->
                                        <TextBlock
                                            Grid.Row="2"
                                            Grid.Column="0"
                                            Classes="parameter-label"
                                            Text="CO₂ Emissions:" />
                                        <TextBlock
                                            Grid.Row="2"
                                            Grid.Column="1"
                                            Classes="parameter-value"
                                            Text="{Binding Emissions, StringFormat={}{0:F1} kg/MWh(th)}" />

                                        <!--  Gas Consumption  -->
                                        <TextBlock
                                            Grid.Row="3"
                                            Grid.Column="0"
                                            Classes="parameter-label"
                                            Text="Gas Consumption:" />
                                        <TextBlock
                                            Grid.Row="3"
                                            Grid.Column="1"
                                            Classes="parameter-value"
                                            Text="{Binding GasConsumption, StringFormat={}{0:F1} MWh(gas)/MWh(th)}" />

                                        <!--  Oil Consumption  -->
                                        <TextBlock
                                            Grid.Row="4"
                                            Grid.Column="0"
                                            Classes="parameter-label"
                                            Text="Oil Consumption:" />
                                        <TextBlock
                                            Grid.Row="4"
                                            Grid.Column="1"
                                            Classes="parameter-value"
                                            Text="{Binding OilConsumption, StringFormat={}{0:F1} MWh(oil)/MWh(th)}" />

                                        <!--  Max Electricity  -->
                                        <TextBlock
                                            Grid.Row="5"
                                            Grid.Column="0"
                                            Classes="parameter-label"
                                            Text="Max Electricity:" />
                                        <TextBlock
                                            Grid.Row="5"
                                            Grid.Column="1"
                                            Classes="parameter-value"
                                            Text="{Binding MaxElectricity, StringFormat={}{0:F1} MW}" />
                                    </Grid>
                                </StackPanel>
                            </Grid>
                        </Border>
                    </DataTemplate>
                </ItemsControl.ItemTemplate>
            </ItemsControl>
        </ScrollViewer>
        <Grid
            Grid.Row="2"
            Grid.Column="1"
            Background="#1e1e1e"
            IsVisible="{Binding ShowScenarioSelection}">
            <StackPanel
                HorizontalAlignment="Center"
                VerticalAlignment="Center"
                Spacing="20">
                <TextBlock
                    Margin="0,0,0,30"
                    HorizontalAlignment="Center"
                    FontSize="24"
                    Foreground="White"
                    Text="Select a Preset" />

                <Button
                    Width="200"
                    Height="60"
                    Background="#0078d7"
                    Command="{Binding NavigateToCommand}"
                    CommandParameter="All Assets"
                    CornerRadius="10">
                    <TextBlock
                        FontSize="18"
                        Foreground="White"
                        Text="All Assets" />
                </Button>

                <Button
                    Width="200"
                    Height="60"
                    Background="#0078d7"
                    Command="{Binding NavigateToCommand}"
                    CommandParameter="Scenario 1"
                    CornerRadius="10">
                    <TextBlock
                        FontSize="18"
                        Foreground="White"
                        Text="Scenario 1" />
                </Button>

                <Button
                    Width="200"
                    Height="60"
                    Background="#0078d7"
                    Command="{Binding NavigateToCommand}"
                    CommandParameter="Scenario 2"
                    CornerRadius="10">
                    <TextBlock
                        FontSize="18"
                        Foreground="White"
                        Text="Scenario 2" />
                </Button>
            </StackPanel>
        </Grid>
    </Grid>
</UserControl>
